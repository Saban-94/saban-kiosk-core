<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sika AI - Kiosk Mode</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #1a73e8;
            --ai-gradient: linear-gradient(135deg, #4285f4, #9b72cb, #d96570);
            --bg-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-main: #202124;
            --text-secondary: #5f6368;
            --shadow-soft: 0 4px 12px rgba(0,0,0,0.05);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * { box-sizing: border-box; outline: none; }
        
        body {
            font-family: 'Heebo', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* Hero Section */
        .hero-section {
            width: 100%; max-width: 800px; padding: 60px 20px 40px;
            text-align: center; display: flex; flex-direction: column; align-items: center;
            transition: var(--transition);
        }
        .hero-section.has-results { padding: 20px 20px; }

        .logo-area { margin-bottom: 30px; display: flex; align-items: center; gap: 10px; }
        .logo-text {
            font-size: 2.5rem; font-weight: 900;
            background: var(--ai-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .search-wrapper {
            width: 100%; position: relative; box-shadow: var(--shadow-soft);
            border-radius: 30px; background: var(--surface-color);
            transition: var(--transition); border: 1px solid transparent;
        }
        .search-wrapper:focus-within { box-shadow: 0 8px 24px rgba(66, 133, 244, 0.2); }

        .search-input {
            width: 100%; padding: 18px 60px 18px 24px; font-size: 1.1rem;
            border: none; background: transparent; border-radius: 30px; font-family: 'Heebo', sans-serif;
        }

        .search-icon { position: absolute; top: 50%; transform: translateY(-50%); left: 20px; color: var(--primary-color); cursor: pointer; }

        /* Results Area */
        .results-container {
            width: 100%; max-width: 1000px; padding: 0 20px 60px;
            opacity: 0; transform: translateY(20px); transition: var(--transition); pointer-events: none;
        }
        .results-container.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }

        .ai-summary-card {
            background: #fff; border-radius: 16px; padding: 24px; margin-bottom: 40px;
            box-shadow: var(--shadow-soft); border-top: 4px solid transparent;
            background-image: linear-gradient(white, white), var(--ai-gradient);
            background-origin: border-box; background-clip: content-box, border-box;
        }

        .ai-header { display: flex; align-items: center; gap: 8px; margin-bottom: 16px; font-size: 0.9rem; font-weight: 700; color: var(--text-secondary); text-transform: uppercase; }
        .ai-content { font-size: 1.1rem; line-height: 1.6; color: var(--text-main); }

        /* Products Grid */
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        
        .product-card {
            background: var(--surface-color); border-radius: 16px; padding: 20px;
            border: 1px solid #f1f3f4; transition: var(--transition);
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .product-card:hover { transform: translateY(-4px); box-shadow: 0 6px 20px rgba(0,0,0,0.1); }

        .prod-supplier { font-size: 0.75rem; font-weight: 700; color: #1967d2; text-transform: uppercase; margin-bottom: 4px; }
        .prod-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 8px; }
        .prod-desc { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 16px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .btn { padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer; border: none; width: 100%; margin-top: 10px; background-color: #e8f0fe; color: #174ea6; }
        .btn:hover { background-color: #d2e3fc; }

        /* Loader */
        .typing-indicator { font-style: italic; color: #5f6368; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>

    <div class="hero-section" id="hero">
        <div class="logo-area">
            <div class="logo-text">Sika AI Kiosk</div>
        </div>

        <div class="search-wrapper">
            <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" onclick="handleSearch()">
                <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" id="mainInput" class="search-input" placeholder="砖 转 (砖:  拽 转 ?)..." onkeypress="if(event.key==='Enter') handleSearch()">
        </div>
    </div>

    <div class="results-container" id="resultsArea">
        <div class="ai-summary-card">
            <div class="ai-header"> 转砖转 注专转</div>
            <div class="ai-content" id="aiText"></div>
        </div>

        <h3 style="margin-bottom: 20px; font-weight: 700;">爪专 专</h3>
        <div class="products-grid" id="productsGrid"></div>
    </div>

    <script type="module">
        //   砖 拽
        import { askBrain } from './js/ai-brain.js';

        window.handleSearch = async () => {
            const query = document.getElementById('mainInput').value.trim();
            if (!query) return;

            // UI Updates
            document.getElementById('hero').classList.add('has-results');
            const resultsArea = document.getElementById('resultsArea');
            const aiText = document.getElementById('aiText');
            const grid = document.getElementById('productsGrid');
            
            // Show Loading
            resultsArea.classList.add('visible');
            aiText.innerHTML = '<span class="typing-indicator">砖... 转 转...</span>';
            grid.innerHTML = '';

            try {
                // --- 拽专  转 ---
                const response = await askBrain(query);
                
                // 专拽转 转砖
                aiText.innerHTML = response.answer || " 爪 转砖 拽转,   爪专 拽专:";

                // 专拽转 爪专
                if (response.products && response.products.length > 0) {
                    grid.innerHTML = response.products.map(p => `
                        <div class="product-card">
                            <div>
                                <div class="prod-supplier">${p.supplier || 'Sika'}</div>
                                <div class="prod-title">${p.name}</div>
                                <div class="prod-desc">${p.description || ''}</div>
                            </div>
                            <button class="btn" onclick="alert('砖 : ${p.sku}')">驻专 住驻</button>
                        </div>
                    `).join('');
                } else {
                    grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; color: #888;"> 爪 爪专 转 拽. 住 转 驻转 专转.</div>';
                }

            } catch (e) {
                console.error(e);
                aiText.innerText = "砖 转拽砖专转 注 . 住 砖.";
            }
        };
    </script>
</body>
</html>
